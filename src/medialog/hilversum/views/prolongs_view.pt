<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="medialog.hilversum" metal:use-macro="context/main_template/macros/master">
  <body>
    <metal:content-core fill-slot="content-core">
      <metal:block define-macro="content-core" tal:define="portal_url view/portal_url">
  
          <!-- <label for="dropdown">Choose an option:</label> -->
          <!-- <select id="dropdown" name="dropdown"> -->
            <!--option value="">Please choose an option</option>
            <option tal:repeat="aanbieder view/aanbieders" value="${aanbieder}"> ${aanbieder}</option>
          </select-->
          <!-- loop all keyword-->
          <button id="filter-toggle" class="btn btn-primary" style="cursor:pointer;" 
            i18translate="">Toggle Filters <span id="filter-icon">▶</span></button>
          <div class="filter flex hidden" id="filter-section">
        
            <tal:repeat tal:repeat="keyword python: view.get_keywords()">
    
            <tal:define tal:define="key keyword; title python: view.get_keywords()[keyword]">
              <!-- <label for="dropdown-${key}">${title}</label> -->
              <select id="dropdown-${key}" name="dropdown-${key}">
                <option value="">${title}</option>
                <option tal:repeat="item python:view.get_keyword(key)" value="${item}">${item}</option>
              </select>
            </tal:define>
            </tal:repeat>



            

          <script>
            $(document).ready(function () {
              $('select[id^="dropdown-"]').on('change', function () {
                var key = this.id.replace('dropdown-', '');
                var item = $(this).val();

                if (key && item) {
                  var baseUrl = '${portal_url}/prolongs-collection/';
                  var query = 'collectionfilter=1&' + encodeURIComponent(key) + '=' + encodeURIComponent(item) + '&discipline_op=or';
                  window.location.href = baseUrl + '?' + query;
                }
              });
            });
          </script>
          <script>
            document.addEventListener('DOMContentLoaded', function () {
              const toggle = document.getElementById('filter-toggle');
              const filterSection = document.getElementById('filter-section');
              const icon = document.getElementById('filter-icon');

              toggle.addEventListener('click', function () {
                filterSection.classList.toggle('hidden');
                icon.textContent = filterSection.classList.contains('hidden') ? '▶' : '▼';
              });
            });
          </script>
          <style>
            select {width: 12%; max-width: 180px; min-width: 150px; margin: 3px}
            .flex {display: flex; flex-wrap:wrap; background: lightblue; padding: 10px;border-radius: 7px;}
            .hidden {display: none !important}
            #filter-toggle {  margin-bottom: 10px }
          </style>
 
 
        
      </div>
  </metal:block>
</metal:content-core>
</body>

</html>
